process {
    executor='slurm'
    containerOptions='--bind "/scratch:/scratch" --bind "/nfs:/nfs" --bind "/gpfs:/gpfs"'
    clusterOptions='--account=scjp0'
    shell = ['/bin/bash', '-ueo', 'pipefail']
    withName: cellbender {
        clusterOptions='--account=scjp0 --partition=gpu --gres=gpu:1'
    }
}

singularity.enabled = true
singularity.autoMounts = true
singularity.runOptions='--nv'
singularity.envWhitelist='CUDA_VISIBLE_DEVICES,PYTORCH_CUDA_ALLOC_CONF'
trace.enabled = true
report.enabled = true
dag.enabled = true
nextflowVersion = '>=20.10.1'

// you may wish to set singularity cache location to avoid unnecessarily re-downloading containers
// singularity.cacheDir = '$HOME/singularity-cache'

//
// set paths for generic files here
// barcode whitelist for multiome is: 737K-arc-v1.txt
// barcode whitelist for GEX depends on platform version (737K-august-2016.txt or 3M-february-2018.txt)
// note that the whitelist must be unzipped
//
params["barcode-whitelist"] = "/home/porchard/github/snRNAseq-NextFlow/737K-arc-v1.txt"
params.star_index = ["hg19": "/lab/work/porchard/reference/STAR/2.7.10a/hg19", "rn6": "/lab/work/porchard/reference/STAR/2.7.9a/rn6", "mm10": "/lab/work/porchard/reference/STAR/2.7.10a/mm10"]
params.gtf = ["hg19": "/lab/work/porchard/reference/gtf/hg19/gencode.v19.annotation.gtf", "rn6": "/lab/work/porchard/reference/gtf/rn6/rn6.ensembl.ucsc-chrom-names.gtf", 'mm10': '/lab/work/porchard/reference/gtf/mm10/gencode.vM25.annotation.gtf']
